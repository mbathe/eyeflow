"use strict";(self.webpackChunkeyeflow_docs=self.webpackChunkeyeflow_docs||[]).push([[760],{5680:function(e,n,t){t.d(n,{xA:function(){return p},yg:function(){return y}});var r=t(6540);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach(function(n){a(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function s(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var c=r.createContext({}),l=function(e){var n=r.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},p=function(e){var n=l(e.components);return r.createElement(c.Provider,{value:n},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef(function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=l(t),d=a,y=u["".concat(c,".").concat(d)]||u[d]||m[d]||o;return t?r.createElement(y,i(i({ref:n},p),{},{components:t})):r.createElement(y,i({ref:n},p))});function y(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,i=new Array(o);i[0]=d;var s={};for(var c in n)hasOwnProperty.call(n,c)&&(s[c]=n[c]);s.originalType=e,s[u]="string"==typeof e?e:a,i[1]=s;for(var l=2;l<o;l++)i[l]=t[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},7600:function(e,n,t){t.r(n),t.d(n,{assets:function(){return c},contentTitle:function(){return i},default:function(){return m},frontMatter:function(){return o},metadata:function(){return s},toc:function(){return l}});var r=t(8168),a=(t(6540),t(5680));const o={sidebar_position:8,title:"Custom Connectors",description:"Build your own EyeFlow connectors"},i="Building Custom Connectors",s={unversionedId:"for-developers/connectors/custom",id:"for-developers/connectors/custom",title:"Custom Connectors",description:"Build your own EyeFlow connectors",source:"@site/docs/for-developers/connectors/custom.md",sourceDirName:"for-developers/connectors",slug:"/for-developers/connectors/custom",permalink:"/eyeflow/fr/docs/for-developers/connectors/custom",draft:!1,editUrl:"https://github.com/eyeflow-ai/eyeflow-docs/tree/main/docs/for-developers/connectors/custom.md",tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_position:8,title:"Custom Connectors",description:"Build your own EyeFlow connectors"},sidebar:"tutorialSidebar",previous:{title:"PostgreSQL Connector",permalink:"/eyeflow/fr/docs/for-developers/connectors/postgresql"},next:{title:"ROI Analysis",permalink:"/eyeflow/fr/docs/for-decision-makers/roi-analysis"}},c={},l=[{value:"Connector Architecture",id:"connector-architecture",level:2},{value:"Quick Start Template",id:"quick-start-template",level:2},{value:"Step 1: Create Connector Class",id:"step-1-create-connector-class",level:3},{value:"Step 2: Define Service Capabilities",id:"step-2-define-service-capabilities",level:3},{value:"Step 3: Register Connector",id:"step-3-register-connector",level:3},{value:"Example: Build a Weather Service Connector",id:"example-build-a-weather-service-connector",level:2},{value:"Complete Implementation",id:"complete-implementation",level:3},{value:"Capabilities Definition",id:"capabilities-definition",level:3},{value:"Testing Your Connector",id:"testing-your-connector",level:2},{value:"Unit Test",id:"unit-test",level:3},{value:"Integration Test in EyeFlow",id:"integration-test-in-eyeflow",level:3},{value:"Publishing Your Connector",id:"publishing-your-connector",level:2},{value:"Step 1: Publish to NPM",id:"step-1-publish-to-npm",level:3},{value:"Step 2: Register with EyeFlow",id:"step-2-register-with-eyeflow",level:3},{value:"Step 3: Community",id:"step-3-community",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Error Handling",id:"error-handling",level:3},{value:"Validation",id:"validation",level:3},{value:"Performance",id:"performance",level:3},{value:"Documentation",id:"documentation",level:3},{value:"Advanced Topics",id:"advanced-topics",level:2},{value:"Streaming Data",id:"streaming-data",level:3},{value:"Async Patterns",id:"async-patterns",level:3},{value:"Batch Operations",id:"batch-operations",level:3},{value:"Debugging Tips",id:"debugging-tips",level:2},{value:"Next Steps",id:"next-steps",level:2}],p={toc:l},u="wrapper";function m({components:e,...n}){return(0,a.yg)(u,(0,r.A)({},p,n,{components:e,mdxType:"MDXLayout"}),(0,a.yg)("h1",{id:"building-custom-connectors"},"Building Custom Connectors"),(0,a.yg)("p",null,"Extend EyeFlow by creating connectors for services not in the built-in library."),(0,a.yg)("h2",{id:"connector-architecture"},"Connector Architecture"),(0,a.yg)("p",null,"Every connector implements the ",(0,a.yg)("inlineCode",{parentName:"p"},"Connector")," interface:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-typescript"},"interface Connector {\n  // Called once at setup (compile time)\n  initialize(config: ConnectorConfig): Promise<void>;\n  \n  // Called for each execution\n  call(method: string, params: Record<string, any>): Promise<any>;\n  \n  // Called on shutdown\n  cleanup(): Promise<void>;\n}\n")),(0,a.yg)("h2",{id:"quick-start-template"},"Quick Start Template"),(0,a.yg)("h3",{id:"step-1-create-connector-class"},"Step 1: Create Connector Class"),(0,a.yg)("p",null,"Create ",(0,a.yg)("inlineCode",{parentName:"p"},"connectors/my-service.connector.ts"),":"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-typescript"},"import { Connector, ConnectorConfig } from '@eyeflow/sdk';\n\nexport class MyServiceConnector implements Connector {\n  private client: MyServiceClient;\n  private config: ConnectorConfig;\n  \n  async initialize(config: ConnectorConfig): Promise<void> {\n    this.config = config;\n    \n    // Validate configuration\n    if (!config.api_key) {\n      throw new Error('api_key is required');\n    }\n    \n    // Initialize client\n    this.client = new MyServiceClient({\n      apiKey: config.api_key,\n      baseUrl: config.base_url || 'https://api.myservice.com'\n    });\n    \n    // Test connection\n    await this.client.testConnection();\n    console.log('\u2705 Connector initialized');\n  }\n  \n  async call(method: string, params: Record<string, any>): Promise<any> {\n    switch (method) {\n      case 'getUserById':\n        return this.getUserById(params.id);\n      case 'createUser':\n        return this.createUser(params);\n      case 'updateUser':\n        return this.updateUser(params.id, params);\n      default:\n        throw new Error(`Unknown method: ${method}`);\n    }\n  }\n  \n  async cleanup(): Promise<void> {\n    await this.client.disconnect();\n  }\n  \n  // Specific methods\n  private async getUserById(id: string): Promise<any> {\n    const response = await this.client.get(`/users/${id}`);\n    return response.data;\n  }\n  \n  private async createUser(data: any): Promise<any> {\n    const response = await this.client.post('/users', data);\n    return response.data;\n  }\n  \n  private async updateUser(id: string, data: any): Promise<any> {\n    const response = await this.client.put(`/users/${id}`, data);\n    return response.data;\n  }\n}\n")),(0,a.yg)("h3",{id:"step-2-define-service-capabilities"},"Step 2: Define Service Capabilities"),(0,a.yg)("p",null,"Create ",(0,a.yg)("inlineCode",{parentName:"p"},"connectors/my-service.capabilities.yaml"),":"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-yaml"},"id: my_service\nname: My Service\ndescription: Integration with My Service API\ntype: data_management\n\ncapabilities:\n  - id: getUserById\n    name: Get User\n    description: Retrieve a single user by ID\n    params:\n      - name: id\n        type: string\n        required: true\n        description: User ID\n    returns:\n      type: object\n      schema:\n        id: string\n        name: string\n        email: string\n        created_at: string\n  \n  - id: createUser\n    name: Create User\n    description: Create a new user\n    params:\n      - name: name\n        type: string\n        required: true\n      - name: email\n        type: string\n        required: true\n      - name: role\n        type: string\n        enum: [admin, user, guest]\n        default: user\n    returns:\n      type: object\n      schema:\n        id: string\n        name: string\n        email: string\n        created_at: string\n  \n  - id: updateUser\n    name: Update User\n    description: Update an existing user\n    params:\n      - name: id\n        type: string\n        required: true\n      - name: name\n        type: string\n      - name: email\n        type: string\n    returns:\n      type: object\n\nauthentication:\n  type: api_key\n  location: header\n  name: X-API-Key\n\nrateLimit:\n  requests: 1000\n  per: minute\n\nhealthCheck:\n  method: testConnection\n  interval: 5m\n")),(0,a.yg)("h3",{id:"step-3-register-connector"},"Step 3: Register Connector"),(0,a.yg)("p",null,"In ",(0,a.yg)("inlineCode",{parentName:"p"},"connectors/index.ts"),":"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-typescript"},"import { MyServiceConnector } from './my-service.connector';\n\nexport const connectors = {\n  my_service: {\n    class: MyServiceConnector,\n    capabilities: require('./my-service.capabilities.yaml')\n  }\n};\n")),(0,a.yg)("hr",null),(0,a.yg)("h2",{id:"example-build-a-weather-service-connector"},"Example: Build a Weather Service Connector"),(0,a.yg)("h3",{id:"complete-implementation"},"Complete Implementation"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-typescript"},"// weather-service.connector.ts\nimport axios from 'axios';\nimport { Connector, ConnectorConfig } from '@eyeflow/sdk';\n\ninterface WeatherData {\n  temperature: number;\n  condition: string;\n  humidity: number;\n  wind_speed: number;\n}\n\nexport class WeatherServiceConnector implements Connector {\n  private apiKey: string;\n  private baseUrl: string = 'https://api.weatherapi.com/v1';\n  \n  async initialize(config: ConnectorConfig): Promise<void> {\n    if (!config.api_key) {\n      throw new Error('WeatherAPI API key is required');\n    }\n    \n    this.apiKey = config.api_key;\n    \n    // Test the connection immediately\n    try {\n      await this.getWeather({ location: 'London' });\n      console.log('\u2705 Weather connector initialized');\n    } catch (error) {\n      throw new Error(`Failed to initialize weather connector: ${error.message}`);\n    }\n  }\n  \n  async call(method: string, params: Record<string, any>): Promise<any> {\n    switch (method) {\n      case 'getWeather':\n        return this.getWeather(params);\n      case 'getForecast':\n        return this.getForecast(params);\n      default:\n        throw new Error(`Unknown method: ${method}`);\n    }\n  }\n  \n  async cleanup(): Promise<void> {\n    // No cleanup needed for HTTP-based connector\n  }\n  \n  private async getWeather(params: any): Promise<WeatherData> {\n    const { location, units = 'metric' } = params;\n    \n    if (!location) {\n      throw new Error('location parameter is required');\n    }\n    \n    try {\n      const response = await axios.get(`${this.baseUrl}/current.json`, {\n        params: {\n          key: this.apiKey,\n          q: location,\n          aqi: 'yes'\n        }\n      });\n      \n      const data = response.data.current;\n      \n      return {\n        temperature: data.temp_c,\n        condition: data.condition.text,\n        humidity: data.humidity,\n        wind_speed: data.wind_kph\n      };\n    } catch (error) {\n      if (error.response?.status === 400) {\n        throw new Error(`Location not found: ${location}`);\n      }\n      throw new Error(`Weather API error: ${error.message}`);\n    }\n  }\n  \n  private async getForecast(params: any): Promise<any> {\n    const { location, days = 5 } = params;\n    \n    if (!location) {\n      throw new Error('location parameter is required');\n    }\n    \n    if (days < 1 || days > 10) {\n      throw new Error('days must be between 1 and 10');\n    }\n    \n    try {\n      const response = await axios.get(`${this.baseUrl}/forecast.json`, {\n        params: {\n          key: this.apiKey,\n          q: location,\n          days: days,\n          aqi: 'yes'\n        }\n      });\n      \n      return response.data.forecast.forecastday.map(day => ({\n        date: day.date,\n        max_temp: day.day.maxtemp_c,\n        min_temp: day.day.mintemp_c,\n        condition: day.day.condition.text,\n        chance_of_rain: day.day.daily_chance_of_rain\n      }));\n    } catch (error) {\n      throw new Error(`Forecast error: ${error.message}`);\n    }\n  }\n}\n")),(0,a.yg)("h3",{id:"capabilities-definition"},"Capabilities Definition"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-yaml"},'# weather-service.capabilities.yaml\nid: weather_service\nname: Weather Service\ndescription: Get weather data via WeatherAPI.com\ntype: data_lookup\n\ncapabilities:\n  - id: getWeather\n    name: Get Current Weather\n    description: Get current weather for a location\n    params:\n      - name: location\n        type: string\n        required: true\n        description: City name or coordinates (e.g., "London", "40.71,-74.00")\n      - name: units\n        type: string\n        enum: [metric, imperial]\n        default: metric\n    returns:\n      type: object\n      schema:\n        temperature: number \n        condition: string\n        humidity: number\n        wind_speed: number\n  \n  - id: getForecast\n    name: Get Weather Forecast\n    description: Get weather forecast (1-10 days)\n    params:\n      - name: location\n        type: string\n        required: true\n      - name: days\n        type: number\n        minimum: 1\n        maximum: 10\n        default: 5\n    returns:\n      type: array\n      items:\n        date: string\n        max_temp: number\n        min_temp: number\n        condition: string\n        chance_of_rain: number\n\nauthentication:\n  type: api_key\n  location: query\n  name: key\n\nrateLimit:\n  requests: 1000\n  per: day\n')),(0,a.yg)("hr",null),(0,a.yg)("h2",{id:"testing-your-connector"},"Testing Your Connector"),(0,a.yg)("h3",{id:"unit-test"},"Unit Test"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-typescript"},"// weather-service.connector.test.ts\nimport { WeatherServiceConnector } from './weather-service.connector';\n\ndescribe('WeatherServiceConnector', () => {\n  let connector: WeatherServiceConnector;\n  \n  beforeEach(async () => {\n    connector = new WeatherServiceConnector();\n    await connector.initialize({\n      api_key: process.env.WEATHER_API_KEY\n    });\n  });\n  \n  it('should get current weather', async () => {\n    const weather = await connector.call('getWeather', {\n      location: 'London'\n    });\n    \n    expect(weather).toHaveProperty('temperature');\n    expect(weather).toHaveProperty('condition');\n    expect(typeof weather.temperature).toBe('number');\n  });\n  \n  it('should get forecast', async () => {\n    const forecast = await connector.call('getForecast', {\n      location: 'London',\n      days: 3\n    });\n    \n    expect(Array.isArray(forecast)).toBe(true);\n    expect(forecast[0]).toHaveProperty('date');\n    expect(forecast[0]).toHaveProperty('max_temp');\n  });\n  \n  it('should reject invalid location', async () => {\n    await expect(\n      connector.call('getWeather', { location: 'InvalidCity123!' })\n    ).rejects.toThrow('Location not found');\n  });\n  \n  afterEach(async () => {\n    await connector.cleanup();\n  });\n});\n")),(0,a.yg)("h3",{id:"integration-test-in-eyeflow"},"Integration Test in EyeFlow"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-typescript"},"describe('Weather Connector Integration', () => {\n  it('should work in a task', async () => {\n    // Create task using connector\n    const task = await client.tasks.create({\n      name: 'get_weather_test',\n      actions: [\n        {\n          type: 'connector',\n          connector: 'weather_service',\n          function: 'getWeather',\n          params: { location: 'New York' }\n        }\n      ]\n    });\n    \n    // Execute task\n    const result = await client.tasks.execute('get_weather_test');\n    \n    expect(result.status).toBe('success');\n    expect(result.output).toHaveProperty('temperature');\n  });\n});\n")),(0,a.yg)("hr",null),(0,a.yg)("h2",{id:"publishing-your-connector"},"Publishing Your Connector"),(0,a.yg)("h3",{id:"step-1-publish-to-npm"},"Step 1: Publish to NPM"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-bash"},'# Create package.json\n{\n  "name": "@myorg/eyeflow-weather-connector",\n  "version": "1.0.0",\n  "main": "dist/index.js",\n  "types": "dist/index.d.ts",\n  "peerDependencies": {\n    "@eyeflow/sdk": "^1.0.0"\n  }\n}\n\n# Build\nnpm run build\n\n# Publish\nnpm publish\n')),(0,a.yg)("h3",{id:"step-2-register-with-eyeflow"},"Step 2: Register with EyeFlow"),(0,a.yg)("p",null,"Submit to the ",(0,a.yg)("a",{parentName:"p",href:"https://registry.eyeflow.io"},"EyeFlow Connector Registry"),":"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-yaml"},'name: Weather Service Connector\nauthor: Your Name\nversion: 1.0.0\npackage: "@myorg/eyeflow-weather-connector"\nnpm_url: https://www.npmjs.com/package/@myorg/eyeflow-weather-connector\ncapabilities:\n  - getWeather\n  - getForecast\ntags:\n  - weather\n  - data-lookup\n')),(0,a.yg)("h3",{id:"step-3-community"},"Step 3: Community"),(0,a.yg)("p",null,"Share your connector:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"GitHub discussions"),(0,a.yg)("li",{parentName:"ul"},"EyeFlow Slack community"),(0,a.yg)("li",{parentName:"ul"},"Connector marketplace")),(0,a.yg)("hr",null),(0,a.yg)("h2",{id:"best-practices"},"Best Practices"),(0,a.yg)("h3",{id:"error-handling"},"Error Handling"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-typescript"},"// \u2705 Good: Specific, actionable errors\nthrow new Error('Location not found: coordinates [-90.5, -180]');\n\n// \u274c Bad: Vague error\nthrow new Error('API error');\n")),(0,a.yg)("h3",{id:"validation"},"Validation"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-typescript"},"// \u2705 Validate early\nif (!params.email || !params.email.includes('@')) {\n  throw new Error('Invalid email format');\n}\n\n// \u2705 Type safety\nasync call(method: string, params: Record<string, any>): Promise<any> {\n  if (typeof method !== 'string') {\n    throw new TypeError('method must be a string');\n  }\n}\n")),(0,a.yg)("h3",{id:"performance"},"Performance"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-typescript"},"// \u2705 Cache connections\nprivate client: ApiClient;  // Reuse across calls\n\n// \u2705 Implement timeout\nconst response = await Promise.race([\n  this.client.get(url),\n  this.timeout(30000)\n]);\n\n// \u274c Don't create new connection per call\nasync call() {\n  const client = new Client();  // Slow!\n}\n")),(0,a.yg)("h3",{id:"documentation"},"Documentation"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-typescript"},"/**\n * Get weather for a location\n * \n * @param location - City name or coordinates\n * @param units - Temperature units (metric/imperial)\n * @returns Weather data with temperature, condition, humidity\n * @throws Error if location not found or API unreachable\n */\nasync getWeather(params: {\n  location: string;\n  units?: 'metric' | 'imperial';\n}): Promise<WeatherData>\n")),(0,a.yg)("hr",null),(0,a.yg)("h2",{id:"advanced-topics"},"Advanced Topics"),(0,a.yg)("h3",{id:"streaming-data"},"Streaming Data"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-typescript"},"async *streamWeather(location: string) {\n  for (let hour = 0; hour < 24; hour++) {\n    const weather = await this.getWeatherAtTime(location, hour);\n    yield weather;\n  }\n}\n")),(0,a.yg)("h3",{id:"async-patterns"},"Async Patterns"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-typescript"},"// Poll for completion\nasync createJob(data: any): Promise<string> {\n  const response = await this.client.post('/jobs', data);\n  return response.job_id;\n}\n\nasync getJobStatus(jobId: string): Promise<any> {\n  return this.client.get(`/jobs/${jobId}`);\n}\n")),(0,a.yg)("h3",{id:"batch-operations"},"Batch Operations"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-typescript"},"async getWeatherBatch(locations: string[]): Promise<WeatherData[]> {\n  return Promise.all(\n    locations.map(loc => this.getWeather({ location: loc }))\n  );\n}\n")),(0,a.yg)("hr",null),(0,a.yg)("h2",{id:"debugging-tips"},"Debugging Tips"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-typescript"},"// Add debug output\nconsole.log('[weather-connector] Calling API:', url);\nconsole.log('[weather-connector] Response:', data);\n\n// Or use debug module\nimport debug from 'debug';\nconst log = debug('eyeflow:weather');\nlog('API response: %O', data);\n\n// Enable with: DEBUG=eyeflow:* npm start\n")),(0,a.yg)("hr",null),(0,a.yg)("h2",{id:"next-steps"},"Next Steps"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"https://github.com/topics/eyeflow-connector"},"Share on GitHub")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"https://github.com/eyeflow-ai/eyeflow/discussions"},"Join community")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"https://registry.eyeflow.io"},"View connector marketplace"))),(0,a.yg)("hr",null),(0,a.yg)("p",null,"Build powerful integrations with EyeFlow! \ud83d\ude80"))}m.isMDXComponent=!0}}]);