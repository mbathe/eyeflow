"use strict";(self.webpackChunkeyeflow_docs=self.webpackChunkeyeflow_docs||[]).push([[434],{5680:function(e,n,a){a.d(n,{xA:function(){return p},yg:function(){return g}});var t=a(6540);function r(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function o(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,t)}return a}function l(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?o(Object(a),!0).forEach(function(n){r(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function i(e,n){if(null==e)return{};var a,t,r=function(e,n){if(null==e)return{};var a,t,r={},o=Object.keys(e);for(t=0;t<o.length;t++)a=o[t],n.indexOf(a)>=0||(r[a]=e[a]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)a=o[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=t.createContext({}),c=function(e){var n=t.useContext(s),a=n;return e&&(a="function"==typeof e?e(n):l(l({},n),e)),a},p=function(e){var n=c(e.components);return t.createElement(s.Provider,{value:n},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},y=t.forwardRef(function(e,n){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=c(a),y=r,g=u["".concat(s,".").concat(y)]||u[y]||d[y]||o;return a?t.createElement(g,l(l({ref:n},p),{},{components:a})):t.createElement(g,l({ref:n},p))});function g(e,n){var a=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=a.length,l=new Array(o);l[0]=y;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i[u]="string"==typeof e?e:r,l[1]=i;for(var c=2;c<o;c++)l[c]=a[c];return t.createElement.apply(null,l)}return t.createElement.apply(null,a)}y.displayName="MDXCreateElement"},6111:function(e,n,a){a.r(n),a.d(n,{assets:function(){return s},contentTitle:function(){return l},default:function(){return d},frontMatter:function(){return o},metadata:function(){return i},toc:function(){return c}});var t=a(8168),r=(a(6540),a(5680));const o={sidebar_position:7,title:"Deployment",description:"Deploy EyeFlow to production environments"},l="Deployment Guide",i={unversionedId:"for-developers/deployment",id:"for-developers/deployment",title:"Deployment",description:"Deploy EyeFlow to production environments",source:"@site/docs/for-developers/deployment.md",sourceDirName:"for-developers",slug:"/for-developers/deployment",permalink:"/eyeflow/fr/docs/for-developers/deployment",draft:!1,editUrl:"https://github.com/eyeflow-ai/eyeflow-docs/tree/main/docs/for-developers/deployment.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7,title:"Deployment",description:"Deploy EyeFlow to production environments"},sidebar:"tutorialSidebar",previous:{title:"SDKs & Client Libraries",permalink:"/eyeflow/fr/docs/for-developers/sdks"},next:{title:"Connectors Overview",permalink:"/eyeflow/fr/docs/for-developers/connectors/overview"}},s={},c=[{value:"Deployment Architectures",id:"deployment-architectures",level:2},{value:"Development (Local)",id:"development-local",level:3},{value:"Staging (Pre-production)",id:"staging-pre-production",level:3},{value:"Production (AWS)",id:"production-aws",level:3},{value:"Production Deployment (AWS)",id:"production-deployment-aws",level:2},{value:"Architecture Overview",id:"architecture-overview",level:3},{value:"Step 1: Prepare AWS",id:"step-1-prepare-aws",level:3},{value:"Step 2: Create RDS Database",id:"step-2-create-rds-database",level:3},{value:"Step 3: Create ElastiCache Redis",id:"step-3-create-elasticache-redis",level:3},{value:"Step 4: Create MSK Kafka Cluster",id:"step-4-create-msk-kafka-cluster",level:3},{value:"Step 5: Create ECS Task Definition",id:"step-5-create-ecs-task-definition",level:3},{value:"Step 6: Create ECS Service",id:"step-6-create-ecs-service",level:3},{value:"Docker Deployment",id:"docker-deployment",level:2},{value:"Multi-stage Build",id:"multi-stage-build",level:3},{value:"Build &amp; Push",id:"build--push",level:3},{value:"Kubernetes Deployment",id:"kubernetes-deployment",level:2},{value:"Helm Chart",id:"helm-chart",level:3},{value:"Deploy to Kubernetes",id:"deploy-to-kubernetes",level:3},{value:"Environment Configuration",id:"environment-configuration",level:2},{value:"Production Secrets",id:"production-secrets",level:3},{value:"Connection Pooling",id:"connection-pooling",level:3},{value:"Monitoring &amp; Health",id:"monitoring--health",level:2},{value:"Health Checks",id:"health-checks",level:3},{value:"Kubernetes Probes",id:"kubernetes-probes",level:3},{value:"Metrics Collection",id:"metrics-collection",level:3},{value:"Database Migrations",id:"database-migrations",level:2},{value:"Backup &amp; Recovery",id:"backup--recovery",level:2},{value:"Automated Backups",id:"automated-backups",level:3},{value:"Point-in-Time Recovery",id:"point-in-time-recovery",level:3},{value:"Monitoring Dashboard",id:"monitoring-dashboard",level:2},{value:"Datadog Integration",id:"datadog-integration",level:3},{value:"Key Metrics to Monitor",id:"key-metrics-to-monitor",level:3},{value:"Scaling",id:"scaling",level:2},{value:"Horizontal Scaling",id:"horizontal-scaling",level:3},{value:"Auto-scaling Policy",id:"auto-scaling-policy",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"&quot;Database Connection Failed&quot;",id:"database-connection-failed",level:3},{value:"&quot;Out of Memory&quot;",id:"out-of-memory",level:3},{value:"&quot;Task Executions Slow&quot;",id:"task-executions-slow",level:3},{value:"Security Checklist",id:"security-checklist",level:2},{value:"Next Steps",id:"next-steps",level:2}],p={toc:c},u="wrapper";function d({components:e,...n}){return(0,r.yg)(u,(0,t.A)({},p,n,{components:e,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"deployment-guide"},"Deployment Guide"),(0,r.yg)("p",null,"Deploy EyeFlow securely and reliably to your production environment."),(0,r.yg)("h2",{id:"deployment-architectures"},"Deployment Architectures"),(0,r.yg)("h3",{id:"development-local"},"Development (Local)"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"docker-compose up -d\n\n# Runs on localhost:3000 and localhost:3001\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"When to use:")," Learning, testing, development"),(0,r.yg)("h3",{id:"staging-pre-production"},"Staging (Pre-production)"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"docker-compose -f docker-compose.staging.yml up -d\n")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"When to use:")," QA, performance testing, final validation"),(0,r.yg)("h3",{id:"production-aws"},"Production (AWS)"),(0,r.yg)("p",null,"Recommended setup for business-critical workloads."),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"production-deployment-aws"},"Production Deployment (AWS)"),(0,r.yg)("h3",{id:"architecture-overview"},"Architecture Overview"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502         CloudFront (CDN)                        \u2502\n\u2502  - Caches dashboard                             \u2502\n\u2502  - DDoS protection                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                     \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502         Application Load Balancer               \u2502\n\u2502  - HTTPS / SSL termination                      \u2502\n\u2502  - Health checks                                \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                     \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502    ECS Cluster (Auto-scaling)                   \u2502\n\u2502  - 3-10 API server instances                    \u2502\n\u2502  - 2 Dashboard instances                        \u2502\n\u2502  - Each in different AZs                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                     \u2502\n        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n        \u2502            \u2502            \u2502              \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502PostgreSQL \u2502  \u2502  Kafka  \u2502  \u2502  Redis  \u2502  \u2502 S3 (logs)\u2502\n\u2502 (RDS HA)  \u2502  \u2502 (3 node)\u2502  \u2502(cluster)\u2502  \u2502          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.yg)("h3",{id:"step-1-prepare-aws"},"Step 1: Prepare AWS"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Required AWS Services:")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"ECS (container orchestration)"),(0,r.yg)("li",{parentName:"ul"},"RDS PostgreSQL (database)"),(0,r.yg)("li",{parentName:"ul"},"ElastiCache Redis (caching)"),(0,r.yg)("li",{parentName:"ul"},"MSK Kafka (message queue)"),(0,r.yg)("li",{parentName:"ul"},"ALB (load balancer)"),(0,r.yg)("li",{parentName:"ul"},"CloudFront (CDN)"),(0,r.yg)("li",{parentName:"ul"},"S3 (logs, backups)"),(0,r.yg)("li",{parentName:"ul"},"Secrets Manager (credentials)")),(0,r.yg)("h3",{id:"step-2-create-rds-database"},"Step 2: Create RDS Database"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"# Create PostgreSQL 14+ on RDS\nAWS_REGION=us-east-1\n\naws rds create-db-instance \\\n  --db-instance-identifier eyeflow-prod \\\n  --db-instance-class db.t3.medium \\\n  --engine postgres \\\n  --master-username postgres \\\n  --master-user-password $(openssl rand -base64 32) \\\n  --allocated-storage 100 \\\n  --storage-type gp3 \\\n  --backup-retention-days 30 \\\n  --multi-az \\\n  --enable-iam-database-authentication \\\n  --enable-deletion-protection\n\n# Output: Database endpoint, master password\n")),(0,r.yg)("h3",{id:"step-3-create-elasticache-redis"},"Step 3: Create ElastiCache Redis"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"aws elasticache create-cache-cluster \\\n  --cache-cluster-id eyeflow-redis \\\n  --cache-node-type cache.t3.micro \\\n  --engine redis \\\n  --num-cache-nodes 3 \\\n  --automatic-failover-enabled\n\n# Output: Redis endpoint (cluster.abc.ng.0001.use1.cache.amazonaws.com)\n")),(0,r.yg)("h3",{id:"step-4-create-msk-kafka-cluster"},"Step 4: Create MSK Kafka Cluster"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"aws kafka create-cluster \\\n  --cluster-name eyeflow-kafka \\\n  --broker-node-group-info BrokerNodeGroupInfo \\\n  --number-of-broker-nodes 3 \\\n  --kafka-version 3.4.0\n\n# Output: Kafka bootstrap servers\n")),(0,r.yg)("h3",{id:"step-5-create-ecs-task-definition"},"Step 5: Create ECS Task Definition"),(0,r.yg)("p",null,"Create ",(0,r.yg)("inlineCode",{parentName:"p"},"ecs-task-definition.json"),":"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "family": "eyeflow-api",\n  "networkMode": "awsvpc",\n  "requiresCompatibilities": ["FARGATE"],\n  "cpu": "512",\n  "memory": "1024",\n  "containerDefinitions": [\n    {\n      "name": "eyeflow-server",\n      "image": "your-registry/eyeflow-server:latest",\n      "portMappings": [\n        {\n          "containerPort": 3000,\n          "hostPort": 3000,\n          "protocol": "tcp"\n        }\n      ],\n      "environment": [\n        {\n          "name": "NODE_ENV",\n          "value": "production"\n        },\n        {\n          "name": "DATABASE_URL",\n          "value": "postgresql://user:pass@eyeflow-prod.abc.us-east-1.rds.amazonaws.com:5432/eyeflow"\n        },\n        {\n          "name": "REDIS_URL",\n          "value": "redis://eyeflow-redis.abc.ng.0001.use1.cache.amazonaws.com:6379"\n        },\n        {\n          "name": "KAFKA_BROKERS",\n          "value": "broker1:9092,broker2:9092,broker3:9092"\n        }\n      ],\n      "secrets": [\n        {\n          "name": "API_KEY",\n          "valueFrom": "arn:aws:secretsmanager:us-east-1:123456789:secret:eyeflow/api-key"\n        }\n      ],\n      "logConfiguration": {\n        "logDriver": "awslogs",\n        "options": {\n          "awslogs-group": "/ecs/eyeflow-api",\n          "awslogs-region": "us-east-1",\n          "awslogs-stream-prefix": "prod"\n        }\n      }\n    }\n  ]\n}\n')),(0,r.yg)("h3",{id:"step-6-create-ecs-service"},"Step 6: Create ECS Service"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},'aws ecs create-service \\\n  --cluster eyeflow-prod \\\n  --service-name eyeflow-api \\\n  --task-definition eyeflow-api:1 \\\n  --desired-count 3 \\\n  --launch-type FARGATE \\\n  --network-configuration \\\n    "awsvpcConfiguration={subnets=[subnet-xxx,subnet-yyy,subnet-zzz],securityGroups=[sg-abc123],assignPublicIp=DISABLED}" \\\n  --load-balancers \\\n    "targetGroupArn=arn:aws:elasticloadbalancing:...,containerName=eyeflow-server,containerPort=3000" \\\n  --auto-scaling \\\n    --minimum=3 \\\n    --maximum=10 \\\n    --target-cpu-utilization=70\n')),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"docker-deployment"},"Docker Deployment"),(0,r.yg)("h3",{id:"multi-stage-build"},"Multi-stage Build"),(0,r.yg)("p",null,"Create ",(0,r.yg)("inlineCode",{parentName:"p"},"Dockerfile"),":"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-dockerfile"},'# Stage 1: Build\nFROM node:18-alpine AS builder\nWORKDIR /app\nCOPY package*.json ./\nRUN npm ci --only=production\n\n# Stage 2: Runtime\nFROM node:18-alpine\nWORKDIR /app\nCOPY --from=builder /app/node_modules ./node_modules\nCOPY src/ ./src/\nCOPY package.json ./\n\nENV NODE_ENV=production\nEXPOSE 3000\n\nCMD ["node", "src/main.js"]\n')),(0,r.yg)("h3",{id:"build--push"},"Build & Push"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"# Build image\ndocker build -t my-registry/eyeflow:v1.0.0 .\n\n# Push to registry\ndocker push my-registry/eyeflow:v1.0.0\n\n# Or use AWS ECR\naws ecr get-login-password --region us-east-1 | docker login --username AWS --password-stdin 123456789.dkr.ecr.us-east-1.amazonaws.com\ndocker tag eyeflow:v1.0.0 123456789.dkr.ecr.us-east-1.amazonaws.com/eyeflow:v1.0.0\ndocker push 123456789.dkr.ecr.us-east-1.amazonaws.com/eyeflow:v1.0.0\n")),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"kubernetes-deployment"},"Kubernetes Deployment"),(0,r.yg)("h3",{id:"helm-chart"},"Helm Chart"),(0,r.yg)("p",null,"Create ",(0,r.yg)("inlineCode",{parentName:"p"},"helm/values.yaml"),":"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},'image:\n  repository: my-registry/eyeflow\n  tag: v1.0.0\n\nreplicas: 3\n\nresources:\n  requests:\n    memory: "512Mi"\n    cpu: "250m"\n  limits:\n    memory: "1Gi"\n    cpu: "1000m"\n\npostgresql:\n  enabled: true\n  auth:\n    password: secure_password_123\n\nredis:\n  enabled: true\n  replica:\n    replicaCount: 3\n\nkafka:\n  enabled: true\n  brokers: 3\n')),(0,r.yg)("h3",{id:"deploy-to-kubernetes"},"Deploy to Kubernetes"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"# Add Helm repo\nhelm repo add eyeflow https://charts.eyeflow.io\nhelm repo update\n\n# Install\nhelm install eyeflow eyeflow/eyeflow \\\n  --namespace eyeflow \\\n  --create-namespace \\\n  -f values.yaml\n\n# Verify\nkubectl get pods -n eyeflow\nkubectl logs -n eyeflow -f deployment/eyeflow-api\n")),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"environment-configuration"},"Environment Configuration"),(0,r.yg)("h3",{id:"production-secrets"},"Production Secrets"),(0,r.yg)("p",null,"Store in AWS Secrets Manager or HashiCorp Vault:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"# PostgreSQL\nDATABASE_URL=postgresql://user:pass@host:5432/eyeflow\nDATABASE_POOL_MIN=5\nDATABASE_POOL_MAX=20\n\n# Redis\nREDIS_URL=redis://host:6379/0\nREDIS_PASSWORD=secure_password\n\n# Kafka\nKAFKA_BROKERS=broker1:9092,broker2:9092,broker3:9092\nKAFKA_USERNAME=eyeflow\nKAFKA_PASSWORD=secure_password\n\n# API Keys\nJWT_SECRET=very_long_random_string_here\nAPI_KEY=sk_live_abc123xyz789\n\n# Monitoring\nDATADOG_API_KEY=dd_api_key_here\nSENTRY_DSN=https://...@sentry.io/123456\n\n# Feature Flags\nLOG_LEVEL=info\nENABLE_AUDIT_LOGGING=true\nENABLE_METRICS=true\n")),(0,r.yg)("h3",{id:"connection-pooling"},"Connection Pooling"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"# PostgreSQL\nDATABASE_POOL_MIN: 5\nDATABASE_POOL_MAX: 20\nCONNECTION_TIMEOUT: 30000\n\n# Redis\nREDIS_POOL_SIZE: 10\n\n# Kafka\nKAFKA_CONNECTIONS: 3\n")),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"monitoring--health"},"Monitoring & Health"),(0,r.yg)("h3",{id:"health-checks"},"Health Checks"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},'# Liveness probe (is service running?)\nGET /health/live\nResponse: { "status": "alive" }\n\n# Readiness probe (can accept traffic?)\nGET /health/ready\nResponse: { "status": "ready", "services": {...} }\n\n# Detailed status\nGET /health/status\nResponse: {\n  "api": "healthy",\n  "database": "healthy",\n  "redis": "healthy",\n  "kafka": "healthy"\n}\n')),(0,r.yg)("h3",{id:"kubernetes-probes"},"Kubernetes Probes"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},"livenessProbe:\n  httpGet:\n    path: /health/live\n    port: 3000\n  initialDelaySeconds: 30\n  periodSeconds: 10\n\nreadinessProbe:\n  httpGet:\n    path: /health/ready\n    port: 3000\n  initialDelaySeconds: 10\n  periodSeconds: 5\n")),(0,r.yg)("h3",{id:"metrics-collection"},"Metrics Collection"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},'# Prometheus endpoint\nGET /metrics\nReturns Prometheus-formatted metrics:\n  eyeflow_tasks_executed_total{status="success"} 12847\n  eyeflow_execution_duration_ms{quantile="0.99"} 120\n  eyeflow_active_tasks 35\n')),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"database-migrations"},"Database Migrations"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"# Run migrations on startup\nnpm run migrate\n\n# Or with npx\nnpx typeorm migration:run\n\n# Rollback if needed\nnpx typeorm migration:revert\n")),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"backup--recovery"},"Backup & Recovery"),(0,r.yg)("h3",{id:"automated-backups"},"Automated Backups"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"# RDS: Automatic daily backups\nBACKUP_RETENTION_DAYS: 30\n\n# S3: Export database weekly\naws rds start-export-task \\\n  --export-task-identifier eyeflow-backup-$(date +%Y%m%d) \\\n  --source-arn arn:aws:rds:us-east-1:123456789:db:eyeflow-prod \\\n  --s3-bucket-name eyeflow-backups \\\n  --iam-role-arn arn:aws:iam::123456789:role/rds-export-role\n")),(0,r.yg)("h3",{id:"point-in-time-recovery"},"Point-in-Time Recovery"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"# Restore database to specific point in time\naws rds restore-db-instance-to-point-in-time \\\n  --source-db-instance-identifier eyeflow-prod \\\n  --target-db-instance-identifier eyeflow-prod-restored \\\n  --restore-time 2024-10-02T14:00:00Z\n")),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"monitoring-dashboard"},"Monitoring Dashboard"),(0,r.yg)("h3",{id:"datadog-integration"},"Datadog Integration"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},"# datadog-agent-config.yaml\ndd_api_key: ${DATADOG_API_KEY}\n\nlogs:\n  - type: docker\n    service: eyeflow-api\n\napm:\n  enabled: true\n  port: 8126\n")),(0,r.yg)("h3",{id:"key-metrics-to-monitor"},"Key Metrics to Monitor"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Execution latency")," (p50, p99)"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Success rate")," (%)"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Active tasks")," (count)"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Database connections")," (used vs pool size)"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Redis memory")," (used vs available)"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Kafka lag")," (consumer group lag)")),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"scaling"},"Scaling"),(0,r.yg)("h3",{id:"horizontal-scaling"},"Horizontal Scaling"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"3 instances \u2192 Can handle: 10K tasks/day\n6 instances \u2192 Can handle: 20K tasks/day\n10 instances \u2192 Can handle: 33K tasks/day\n\nLinear scaling across CPU cores\n")),(0,r.yg)("h3",{id:"auto-scaling-policy"},"Auto-scaling Policy"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"Target metrics:\n- CPU > 70% \u2192 Scale up\n- CPU < 30% for 5 min \u2192 Scale down\n- Min: 3 instances\n- Max: 10 instances\n")),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,r.yg)("h3",{id:"database-connection-failed"},'"Database Connection Failed"'),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"Check:\n1. RDS security group allows inbound: 5432\n2. Database is in AVAILABLE state\n3. Credentials are correct\n4. Connection string format is correct\n")),(0,r.yg)("h3",{id:"out-of-memory"},'"Out of Memory"'),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"Solution:\n1. Increase container memory limit\n2. Check for memory leaks: \n   - Monitor memory over time\n   - Check Redis is not growing unbounded\n3. Enable debug logging to find leaks\n")),(0,r.yg)("h3",{id:"task-executions-slow"},'"Task Executions Slow"'),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"Check:\n1. CPU utilization (scale up if >80%)\n2. Database connection pool not exhausted\n3. Kafka lag (check broker health)\n4. Network latency to external services\n")),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"security-checklist"},"Security Checklist"),(0,r.yg)("ul",{className:"contains-task-list"},(0,r.yg)("li",{parentName:"ul",className:"task-list-item"},(0,r.yg)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Use HTTPS/TLS for all communications"),(0,r.yg)("li",{parentName:"ul",className:"task-list-item"},(0,r.yg)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Enable encryption at rest (EBS, RDS)"),(0,r.yg)("li",{parentName:"ul",className:"task-list-item"},(0,r.yg)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Restrict security group ingress"),(0,r.yg)("li",{parentName:"ul",className:"task-list-item"},(0,r.yg)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Rotate API keys monthly"),(0,r.yg)("li",{parentName:"ul",className:"task-list-item"},(0,r.yg)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Enable audit logging"),(0,r.yg)("li",{parentName:"ul",className:"task-list-item"},(0,r.yg)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Use VPC for database (not public)"),(0,r.yg)("li",{parentName:"ul",className:"task-list-item"},(0,r.yg)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Enable MFA for AWS console"),(0,r.yg)("li",{parentName:"ul",className:"task-list-item"},(0,r.yg)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Backup tested and verified"),(0,r.yg)("li",{parentName:"ul",className:"task-list-item"},(0,r.yg)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Disaster recovery plan documented"),(0,r.yg)("li",{parentName:"ul",className:"task-list-item"},(0,r.yg)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Penetration testing completed")),(0,r.yg)("hr",null),(0,r.yg)("h2",{id:"next-steps"},"Next Steps"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"/eyeflow/fr/docs/for-developers/architecture"},"Architecture Deep Dive")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"/eyeflow/fr/docs/for-developers/api-reference"},"API Reference")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"/eyeflow/fr/docs/for-decision-makers/scaling-performance"},"Monitoring & Observability"))),(0,r.yg)("hr",null),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Ready for production?")," Follow this guide for reliable, scalable deployment. \ud83d\ude80"))}d.isMDXComponent=!0}}]);