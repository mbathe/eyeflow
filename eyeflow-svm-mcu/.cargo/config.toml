[build]
target = "thumbv7em-none-eabihf"   # Cortex-M4F

[target.thumbv7em-none-eabihf]
rustflags = [
    # Link against the STM32F407VG memory layout
    "-C", "link-arg=-Tlink.x",
    "-C", "link-arg=-Tdefmt.x",
    # Fail hard on unused symbols (avoid code-size bloat)
    "-C", "link-arg=--gc-sections",
]

# Use cargo-embed / probe-rs as default runner for `cargo run`
runner = "probe-rs run --chip STM32F407VGTx"
